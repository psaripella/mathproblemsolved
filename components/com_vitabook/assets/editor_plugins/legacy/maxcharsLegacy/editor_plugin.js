(function(){tinymce.create("tinymce.plugins.MaxCharsLegacy",{init:function(a,d){var b=this;b.editor=a;a.addCommand("CheckMaxChars",b._checkMaxChars,b);a.onPostRender.add(function(a,d){tinymce.isIE?a.getBody().innerText.replace(/<\/?[^>]+(>|document.id)/g,"").replace(/&nbsp;/g,""):getContent=a.getBody().textContent.replace(/<\/?[^>]+(>|document.id)/g,"").replace(/&nbsp;/g,"");b._MCtext=a.getBody().innerHTML},b);a.onKeyUp.add(b._checkMaxChars,b);a.onChange.add(b._checkMaxChars,b);a.onSetContent.add(b._checkMaxChars,
    b)},getInfo:function(){return{longname:"Maximum Characters",author:"Lorenzo Campanis",authorurl:"http://www.lcampanis.com",infourl:"http://www.lcampanis.com",version:"2.0"}},_checkMaxChars:function(){var a=this.editor,d=parseInt(a.getParam("max_chars")),b=a.getParam("max_chars_nospaces"),c=a.getParam("max_chars_indicator"),h=a.getParam("max_chars_text",""),f=a.getParam("max_chars_maxText",""),g="",k="",g=tinymce.isIE?a.getBody().innerText.replace(/<\/?[^>]+(>|document.id)/g,"").replace(/&nbsp;/gi,
    ""):a.getBody().textContent.replace(/<\/?[^>]+(>|document.id)/g,"").replace(/&nbsp;/gi,""),k=a.getBody().innerHTML,e=g.replace(/<\/?[^>]+(>|document.id)/g,"");1==b&&(e=e.replace(/\s/g,""));0<d&&0<=e.length&&d<e.length&&this._MCtext!=g?a.setContent(this._MCtext):this._MCtext=k;(c=document.getElementById(c))&&null!=("input"==c.tagName.toLowerCase()?c.value:parseInt(c.innerHTML))&&("input"==c.tagName.toLowerCase()?0>d-e.length?""!=f&&(c.value=f):c.value=h+" "+(d-e.length)+"/"+d:0>d-e.length?""!=f&&(c.innerHTML=
    f):c.innerHTML=h+" "+(d-e.length));return 1}});tinymce.PluginManager.add("maxcharsLegacy",tinymce.plugins.MaxCharsLegacy)})();